# Инструкция по установке

1) **скачать проект**

2) **установка зависимостей**:

   > pip install -r requirements.txt

3) **Заполнить данные в .env**:
   - token_bot - обязаталельный параметр, нужен для работы бота в вк
   - vk_api_key - обязательный параметр, нужен для работы запросов к вк
   - group_id - обязательный параметр, id группый, в которой находится бот
   - token_bot_test, vk_api_key_test, group_id_test, id_vk_for_test - необязательные параметры, необходимо для тестов
   - bot_tg - необязательный параметр, если бот тг выключен в настройках проекта (по умолчанию выключен, если включить, то токен необходимо вставить). Чтобы включить бот, необходимо в файле settings.py установить переменную tg_bot -> ключ include = True. В данном словаре также можно установить собственные значения логина и пароля, которые бот запросит при общении с ним. Также можно указать список времени, когда бот будет отправлять уведомления (ключ send_times).

![image](https://github.com/user-attachments/assets/01b06f31-ea72-4372-a1b4-c2cc3dd56093)

>Получение ВК токенов и настройка ВК бота описана ниже в файле.

4) Настройка postgreSQL и Redis:
   - установка редиса - [ссылка](https://habr.com/ru/articles/821363/)
   - установка PostgreSQL - [ссылка](https://tproger.ru/articles/osnovy-postgresql-dlya-nachinayushhih--ot-ustanovki-do-pervyh-zaprosov-250851)

Далее необходимо ввести данные в настройки (модуль settings.py в главной директории проекта):

![image](https://github.com/user-attachments/assets/63bc2f60-9461-48ab-89ee-6088d9800a4b)

В postgresql указать значение ключей USER (имя пользователя), PASSWORD (пароль пользователя), BD_NAME (название базы данных - можно указать несуществующее название, БД создасться автоматически при первом запуске). В redis данные можно оставить по умолчанию. Сервер Redis должен быть активным.

5) Включение TG бота (необязательно):

Чтобы получать уведомления о работе програмы (логи об ошибках, основных действиях и т.д.), необходимо в указать токен bot_tg в файл .env, который можно получить по [ссылке](https://t.me/BotFather) и включить его (include = True).  В данном словаре также можно установить собственные значения логина и пароля, которые бот запросит при общении с ним. Также можно указать список времени, когда бот будет отправлять уведомления (ключ send_times).

![image](https://github.com/user-attachments/assets/42bfb8b6-e6bd-4d56-84bd-7e9a182ce6e0)

После этого в телеграме в ваше боте необходимо прописать команду /start и авторизироваться, после чего он будет присылать уведомления в указанное время. Логи о критических ошибках (которые, вероятно, остановили работу программу) он будет присылать сразу же, вне зависимости от того, какое указано время в send_times.

----

# **Шаги по получению токенов vk:**

## 1. VK token.

- по [ссылке](https://id.vk.com/about/business/go/accounts/128224/apps) необходимо создать приложение, где в «Базовый домен» и «Доверенный Redirect URL» вставить ссылку https://example.com/callback
- далее в поле "Информация о приложении" скопировать ID приложение
- в ссылку вставить данное id после client_id=:
```
https://oauth.vk.com/authorize?client_id=ВАШЕ_ID&display=page&redirect_uri=https://example.com/callback&scope=friends,photos&response_type=token&v=5.131&state=123456
```
За место "ВАШЕ_ID" должно стоять ID созданного ВК приложения. После необходимо перейти по этой ссылку, подтвердить вход 
- после вас перекинет на другой адрес. Из это адреса (ссылки вверху браузера)  нужно скопировать access_token. Это весь набор символов от access_token= до &expires_in. Полученные данные необходимо вставить в vk_api_key в файле .env проекта

## 2. Получение токена от ВК бота и его настройка.

- в самом ВК необходимо создать группу (на любую тему)
- далее в настройках группы в разделе "Работа с API" необходимо создать ключ и указать все разрешения к нему. Данный ключ нужно вставить в token_bot в файле .env
- получить id группы вк, в которой находится ваш бот и вставить в group_id в файле .env

Далее необходимо настроить бота в ВК, чтобы он работал корректно, для этого:
- в настройках группы в вк нажать на раздел "Сообщения", в появившемся списке выбрать "Настройки для бота", далее в поле "Возможности ботов" установить статусы "Включены" и установить галочку "Добавить кнопку «Начать»"
- далее перейти в настройки и выбрать "Работа с API" и добавить сервер в Callback API, а также установить следующие типы событий:

  ![image](https://github.com/user-attachments/assets/3ace2df7-485c-476a-a765-1ff6474b05b3)

  - далее выбрать Long Poll API и напротив поля Long Poll API установить статус "Включено", далее выбрать следующие типы событий:
 
![image](https://github.com/user-attachments/assets/6359d373-d182-43cd-aba7-93ea506b37a0)

После всех действий программа будет готова к использованию. Необходимо запустить модуль main.py в главной директории проекта.












